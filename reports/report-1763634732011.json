{
  "id": 1763634732011,
  "fileName": "index.php",
  "fileSize": 2788,
  "originalCode": "<?php\r\nrequire_once 'src/Database.php';\r\nrequire_once 'src/Actor.php';\r\nrequire_once 'src/Film.php';\r\nrequire_once 'src/FilmActors.php';\r\nrequire_once 'src/ActorManager.php';\r\nrequire_once 'src/FilmManager.php';\r\nrequire_once 'src/FilmActorManager.php';\r\nrequire_once 'src/Home.php';\r\n\r\n\r\n$database = new Database();\r\n$filmManager = new FilmManager($database);\r\n$actorManager = new ActorManager($database);\r\n$filmActorManager = new FilmActorManager($database);\r\n$home = new Home($database); \r\n\r\n\r\n$error = '';\r\n\r\n\r\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n    if (isset($_POST['add_film'])) {\r\n        \r\n        if (strlen($_POST['film_name']) > 30 || strlen($_POST['film_genre']) > 30) {\r\n            $error = \"Filmnaam en genre mogen maximaal 30 karakters zijn.\";\r\n        } else {\r\n            $result = $filmManager->addFilm($_POST['film_name'], $_POST['film_genre']);\r\n            if ($result) {\r\n                header('Location: index.php');\r\n                exit;\r\n            } else {\r\n                $error = \"Deze film bestaat al in de database.\";\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n    if (isset($_POST['delete_film'])) {\r\n        $filmManager->deleteFilm($_POST['film_id']);\r\n        header('Location: index.php?page=koppelen');\r\n        exit;\r\n    }\r\n    \r\n    if (isset($_POST['add_actor'])) {\r\n        \r\n        if (strlen($_POST['actor_name']) > 30) {\r\n            $error = \"Acteurnaam mag maximaal 30 karakters zijn.\";\r\n        } else {\r\n            $result = $actorManager->addActor($_POST['actor_name']);\r\n            if ($result) {\r\n                header('Location: index.php?page=acteur');\r\n                exit;\r\n            } else {\r\n                $error = \"Deze acteur bestaat al in de database.\";\r\n            }\r\n        }\r\n    }\r\n    \r\n    if (isset($_POST['link_actor_film'])) {\r\n        $result = $filmActorManager->linkActorToFilm($_POST['film_id'], $_POST['actor_id']);\r\n        if ($result) {\r\n            header('Location: index.php?page=koppelen');\r\n            exit;\r\n        } else {\r\n            $error = \"Deze koppeling bestaat al in de database.\";\r\n        }\r\n    }\r\n}\r\n\r\n\r\n$page = $_GET['page'] ?? 'home';\r\n\r\n\r\ninclude 'templates/header.php';\r\n\r\n\r\nif (!empty($error)) {\r\n    echo '<div style=\"background: #f44336; color: white; padding: 1rem; border-radius: 5px; margin-bottom: 1rem;\">';\r\n    echo htmlspecialchars($error);\r\n    echo '</div>';\r\n}\r\n\r\n\r\nswitch ($page) {\r\n    case 'film':\r\n        include 'templates/film_toevoegen.php';\r\n        break;\r\n    case 'acteur':\r\n        include 'templates/acteur_toevoegen.php';\r\n        break;\r\n    case 'koppelen':\r\n        include 'templates/koppelen.php';\r\n        break;\r\n    default:\r\n        include 'templates/home.php';\r\n        break;\r\n}\r\n\r\n\r\ninclude 'templates/footer.php';\r\n?>",
  "improvedCode": "<?php\r\nrequire_once 'src/Database.php';\r\nrequire_once 'src/Actor.php';\r\nrequire_once 'src/Film.php';\r\nrequire_once 'src/FilmActors.php';\r\nrequire_once 'src/ActorManager.php';\r\nrequire_once 'src/FilmManager.php';\r\nrequire_once 'src/FilmActorManager.php';\r\nrequire_once 'src/Home.php';\r\n\r\n\r\n$database = new Database();\r\n$filmManager = new FilmManager($database);\r\n$actorManager = new ActorManager($database);\r\n$filmActorManager = new FilmActorManager($database);\r\n$home = new Home($database); \r\n\r\n\r\n$error = '';\r\n\r\n\r\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n    if (isset($_POST['add_film'])) {\r\n        \r\n        if (strlen($_POST['film_name']) > 30 || strlen($_POST['film_genre']) > 30) {\r\n            $error = \"Filmnaam en genre mogen maximaal 30 karakters zijn.\";\r\n        } else {\r\n            $result = $filmManager->addFilm($_POST['film_name'], $_POST['film_genre']);\r\n            if ($result) {\r\n                header('Location: index.php');\r\n                exit;\r\n            } else {\r\n                $error = \"Deze film bestaat al in de database.\";\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n    if (isset($_POST['delete_film'])) {\r\n        $filmManager->deleteFilm($_POST['film_id']);\r\n        header('Location: index.php?page=koppelen');\r\n        exit;\r\n    }\r\n    \r\n    if (isset($_POST['add_actor'])) {\r\n        \r\n        if (strlen($_POST['actor_name']) > 30) {\r\n            $error = \"Acteurnaam mag maximaal 30 karakters zijn.\";\r\n        } else {\r\n            $result = $actorManager->addActor($_POST['actor_name']);\r\n            if ($result) {\r\n                header('Location: index.php?page=acteur');\r\n                exit;\r\n            } else {\r\n                $error = \"Deze acteur bestaat al in de database.\";\r\n            }\r\n        }\r\n    }\r\n    \r\n    if (isset($_POST['link_actor_film'])) {\r\n        $result = $filmActorManager->linkActorToFilm($_POST['film_id'], $_POST['actor_id']);\r\n        if ($result) {\r\n            header('Location: index.php?page=koppelen');\r\n            exit;\r\n        } else {\r\n            $error = \"Deze koppeling bestaat al in de database.\";\r\n        }\r\n    }\r\n}\r\n\r\n\r\n$page = $_GET['page'] ?? 'home';\r\n\r\n\r\ninclude 'templates/header.php';\r\n\r\n\r\nif (!empty($error)) {\r\n    echo '<div style=\"background: #f44336; color: white; padding: 1rem; border-radius: 5px; margin-bottom: 1rem;\">';\r\n    echo htmlspecialchars($error);\r\n    echo '</div>';\r\n}\r\n\r\n\r\nswitch ($page) {\r\n    case 'film':\r\n        include 'templates/film_toevoegen.php';\r\n        break;\r\n    case 'acteur':\r\n        include 'templates/acteur_toevoegen.php';\r\n        break;\r\n    case 'koppelen':\r\n        include 'templates/koppelen.php';\r\n        break;\r\n    default:\r\n        include 'templates/home.php';\r\n        break;\r\n}\r\n\r\n\r\ninclude 'templates/footer.php';\r\n?>\n\n// AI suggesties zouden hier verschijnen\n// Activeer OpenAI API voor echte analyse",
  "feedback": {
    "overall": "Dit is een demo analyse. Verbind met OpenAI API voor gedetailleerde code review en verbeteringen.",
    "strengths": [
      "Code structuur is leesbaar",
      "Goede variabele namen"
    ],
    "improvements": [
      "Voeg foutafhandeling toe",
      "Gebruik const in plaats van let waar mogelijk",
      "Splits grote functies in kleinere"
    ],
    "bestPractices": [
      "Voeg commentaar toe voor complexe logica",
      "Houd consistente code stijl aan",
      "Gebruik moderne taal features"
    ]
  },
  "statistics": {
    "complexity": "medium",
    "readability": "7",
    "maintainability": "6",
    "efficiency": "5"
  },
  "timestamp": "2025-11-20T10:32:12.011Z",
  "language": "nl",
  "analysisTime": "0s"
}